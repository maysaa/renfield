[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Order", 
  "modified": "2016-06-09 15:15:46.066022", 
  "name": "Purchase Order-Client", 
  "script": "frappe.ui.form.on(\"Purchase Order Item\", \"net_weight\", function(frm, doctype, name) {\n          var row = locals[doctype][name];\n          row.input_this_rate = row.weight_unit_rate * row.net_weight;\n          refresh_field(\"input_this_rate\");\n        });\nfrappe.ui.form.on(\"Purchase Order Item\", \"weight_unit_rate\", function(frm, doctype, name) {\n          var row = locals[doctype][name];\n          row.input_this_rate = row.weight_unit_rate * row.net_weight;\n           refresh_field(\"input_this_rate\");\n        });", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Quotation", 
  "modified": "2017-05-24 11:26:59.935112", 
  "name": "Quotation-Client", 
  "script": "cur_frm.add_fetch('quotation','value','value');\ncur_frm.add_fetch('quotation','closing_date','closing_date');\ncur_frm.add_fetch('quotation','opportunity_purpose','opportunity_purpose');\ncur_frm.add_fetch('quotation','buying_status','buying_status');\ncur_frm.add_fetch('quotation','stage','stage');\ncur_frm.add_fetch('quotation','competition_status','competition_status');\ncur_frm.add_fetch('quotation','support_needed','support_needed');\n\nfrappe.ui.form.on(\"Quotation\", \"refresh\", function(frm) {\n              cur_frm.add_custom_button(__(\"Make Communication\"), function() {\n\t\t\tfrappe.route_options = {\n\t\t\t\treference_doctype: \"Quotation\",\n                        \treference_name: cur_frm.doc.name,\n                                recipients: cur_frm.doc.contact_email,\n                                phone_no: cur_frm.doc.contact_mobile\n\t\t\t}\n\t\t\tfrappe.set_route(\"List\", \"Communication\");\n\t\t});\n               cur_frm.add_custom_button(__(\"Make ToDo\"), function() {\n\t\t\t\n\t\t\tfrappe.set_route(\"List\", \"ToDo\");\n\t\t});\n       \n});\n\nfrappe.ui.form.on(\"Quotation\", \"refresh\", function(frm) {\n        cur_frm.add_custom_button(__('Make Interactions'), cur_frm.cscript['Make Interactions'], __(\"Make\"));\n\t             \n});\n\ncur_frm.cscript['Make Interactions'] = function(cdt, cdn) {\n    frappe.model.open_mapped_doc({\n        method: \"nhance.api.make_interactions_quot\",\n        frm: cur_frm,\n\t\n    })\n}\n\n\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Opportunity", 
  "modified": "2017-05-17 19:23:41.354062", 
  "name": "Opportunity-Client", 
  "script": "frappe.ui.form.on(\"Opportunity\", \"refresh\", function(frm) {\n        cur_frm.add_custom_button(__('Make Communication'), cur_frm.cscript['Make Communication'], __(\"Make\"));\n\t             \n});\n\ncur_frm.cscript['Make Communication'] = function() {\n\n            frappe.route_options = {\n                reference_doctype: \"Opportunity\",\n                            reference_name: cur_frm.doc.name,\n                                email_account: cur_frm.email,\n                                phone_no: cur_frm.contact_mobile\n            }\n            frappe.set_route(\"List\", \"Communication\");\n}\n\nfrappe.ui.form.on(\"Opportunity\", \"refresh\", function(frm) {\n        cur_frm.add_custom_button(__('Make Interactions'), cur_frm.cscript['Make Interactions'], __(\"Make\"));\n\t             \n});\n\ncur_frm.cscript['Make Interactions'] = function() {\n    frappe.model.open_mapped_doc({\n        method: \"nhance.api.make_interactions\",\n        frm: cur_frm\n    })\n}\n\n\nfrappe.ui.form.on(\"Opportunity\", \"refresh\", function(frm, cdt, cdn) {\n              cur_frm.add_custom_button(__('Proposal Stage'), cur_frm.cscript['Make Proposal Stage'],\n                __(\"Make\"));\n        \n       \n});\n    \n\ncur_frm.cscript['Make Proposal Stage'] = function() {\n    frappe.model.open_mapped_doc({\n        method: \"nhance.api.make_proposal_stage\",\n        frm: cur_frm\n    })\n}\n\nfrappe.ui.form.on(\"Opportunity\", \"refresh\", function(frm, cdt, cdn) {\n         \n          frappe.call({\n                method: \"nhance.api.set_proposal_stage_values\",\n                args: {\n                   \"opportunity\": frm.doc.name\n               },\n                   callback:function(r){\n                           \n                           if(r.message) {\n\t\t\t\t\n                             frappe.model.set_value(cdt, cdn, \"amount\", flt(r.message[0][0]));\n\t\t\t     refresh_field(\"amount\");\n                             frappe.model.set_value(cdt, cdn, \"close_date\", r.message[0][1]);\n                             refresh_field(\"close_date\");\n\t\t\t     frappe.model.set_value(cdt, cdn, \"stages\", r.message[0][2]);\n                             refresh_field(\"stages\");\n\t\t             frappe.model.set_value(cdt, cdn, \"opp_purpose\", r.message[0][3]);\n                             refresh_field(\"opp_purpose\");\n\t\t\t     frappe.model.set_value(cdt, cdn, \"buy_status\", r.message[0][4]);\n                             refresh_field(\"buy_status\");\n\t\t\t     frappe.model.set_value(cdt, cdn, \"supp_needed\", r.message[0][5]);\n                             refresh_field(\"supp_needed\");\n\t\t\t     frappe.model.set_value(cdt, cdn, \"compete_status\", r.message[0][6]);\n                             refresh_field(\"compete_status\");\n\t\t\t    }\n                         }\n\t\t     });\n});\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Supplier Quotation", 
  "modified": "2017-03-09 12:28:45.438020", 
  "name": "Supplier Quotation-Client", 
  "script": "frappe.ui.form.on(\"Supplier Quotation Item\", \"net_weight\", function(frm, doctype, name) {\n          var row = locals[doctype][name];\n          row.input_this_rate = row.weight_unit_rate * row.net_weight;\n          refresh_field(\"input_this_rate\");\n        });\nfrappe.ui.form.on(\"Supplier Quotation Item\", \"weight_unit_rate\", function(frm, doctype, name) {\n          var row = locals[doctype][name];\n          row.input_this_rate = row.weight_unit_rate * row.net_weight;\n           refresh_field(\"input_this_rate\");\n        });", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Stock Entry", 
  "modified": "2017-08-09 09:23:46.354136", 
  "name": "Stock Entry-Client", 
  "script": "frappe.ui.form.on(\"Stock Entry\", \"refresh\", function(frm, doctype, name) {\n\n\tvar serial_no = \"PRG/001\";\n\titem_code = \"RE0001\";\n\tdelivery_required_at = \"Finished Goods - PISPL\";\n\tdelivery_required_on = \"2017-08-10\";\n\t\n\tfrappe.call({\n                method: \"renfield.api.make_new_serial_no_entry\",\n                args: {\n                   \"serial_no\": serial_no,\n\t\t    \"item_code\": item_code,\n\t\t    \"delivery_req_at\": delivery_required_at,\n\t\t   \"delivery_req_on\": delivery_required_on\n\t\t   \t\t   \n                   },\n\t\t});\n\n});\n\nfrappe.ui.form.on(\"Stock Entry\", \"refresh\", function(frm, doctype, name) {\n\tmsgprint(frappe.user_roles);\n\t\n\tif (frappe.user_roles.indexOf(\"Manufacturing User\"))\n\t{\n\t\tmsgprint(\"Am I inside\");\n\t}\n\telse {\n\t\tmsgprint(\"I am Manufacturing User\");\n\t\tif (frm.doc.purpose.indexOf(\"Manufacture\"))\n\t\t{\n\t\t\tmsgprint(\"Not manufacture\");\n\t\t\t cur_frm.toggle_display(valuation_rate,false);\n\t\t}\n\t\telse \n\t\t{\n\t\t\tmsgprint(\"Manufacture\");\n\t\t\tcur_frm.fields_dict.items.grid.toggle_display\n    (\"valuation_rate\", true)\n\t\t}\n\t\n            }\n});\n\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Salary Slip", 
  "modified": "2017-08-18 11:48:33.412668", 
  "name": "Salary Slip-Client", 
  "script": "frappe.ui.form.on(\"Salary Slip\", \"before_save\", function(frm, cdt, cdn) {\n\n        esi_amount = frm.doc.gross_pay * 1.75 / 100;\n\n\tif (frm.doc.gross_pay <= 21000)\n\t{\n\t\tvar esi_found = \"N\";\n\t     $.each(frm.doc.deductions, function(i, d) {\n             \n            var sal_desc = d.salary_component;\n\t\n            if (sal_desc.indexOf(\"ESI\")) {\n                               \n              } else  {\n        \t\n\t        frappe.model.set_value(cdt, cdn, \"esi_added\", 1);\n\t      d.amount = flt(esi_amount);\n                             \n             }\n\t   });\n\t\t\n\t\tif(frm.doc.esi_added == 0)\n\t\t{\n\t\tvar d = frappe.model.add_child(frm.doc, \"Salary Detail\", \"deductions\");\n\t\td.salary_component = \"ESI\";\n\t\td.abbr = \"E\";\n\t\td.amount = esi_amount;\t\n\t\tfrappe.model.set_value(cdt, cdn, \"esi_added\", 1);\n\t\t}\n\t}\t\n\telse {\n\t\t$.each(frm.doc.deductions, function(i, d) {\n             \n\t         var sal_desc = d.salary_component;\n\t\n        \t if (sal_desc.indexOf(\"ESI\")) {\n                               \n\t              } else  {\n        \t      d.amount = 0;\n                             \n             }\n\t   });\n\n\t\t}\n\t\n    \n});\n\nfrappe.ui.form.on(\"Salary Slip\", \"before_submit\", function(frm, cdt, cdn) {\n\n        esi_amount = frm.doc.gross_pay * 1.75 / 100;\n\n\tif (frm.doc.gross_pay <= 21000)\n\t{\n\t\tvar esi_found = \"N\";\n\t     $.each(frm.doc.deductions, function(i, d) {\n             \n            var sal_desc = d.salary_component;\n\t\n            if (sal_desc.indexOf(\"ESI\")) {\n                               \n              } else  {\n        \t\n\t        frappe.model.set_value(cdt, cdn, \"esi_added\", 1);\n\t      d.amount = flt(esi_amount);\n                             \n             }\n\t   });\n\t\t\n\t\tif(frm.doc.esi_added == 0)\n\t\t{\n\t\tvar d = frappe.model.add_child(frm.doc, \"Salary Detail\", \"deductions\");\n\t\td.salary_component = \"ESI\";\n\t\td.abbr = \"E\";\n\t\td.amount = esi_amount;\t\n\t\tfrappe.model.set_value(cdt, cdn, \"esi_added\", 1);\n\t\t}\n\t}\t\n\telse {\n\t\t$.each(frm.doc.deductions, function(i, d) {\n             \n\t         var sal_desc = d.salary_component;\n\t\n        \t if (sal_desc.indexOf(\"ESI\")) {\n                               \n\t              } else  {\n        \t      d.amount = 0;\n                             \n             }\n\t   });\n\n\t\t}\n\t\n    \n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "BOM", 
  "modified": "2017-06-21 15:50:41.418856", 
  "name": "BOM-Client", 
  "script": "frappe.ui.form.on(\"BOM Item\", \"bom_no\", function(frm, doctype, name) {\n          var row = locals[doctype][name];\n\t  msgprint(row.bom_no);\n\t  if (row.bom_no == \" \")\n\t  {\n            row.bom_no = row.bom_no;\n          refresh_field(\"row.bom_no\");\n\t}\n        });", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2017-08-21 13:50:21.487859", 
  "name": "Sales Invoice-Client", 
  "script": "frappe.ui.form.on(\"Sales Invoice\", \"refresh\", function(frm, doctype, name) {\n\tmsgprint(\"Inside\");\n\tfrappe.call({\n                method: \"emigoh.api.submit_sales_invoices\",\n\t\targs: {\n                   \"doctype\": doctype\n\t\t    \t\t   \t\t   \n                   }\n\t\t});\n});\n\n", 
  "script_type": "Client"
 }
]